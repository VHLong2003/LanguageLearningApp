<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="LanguageLearningApp.Views.User.AccountPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:LanguageLearningApp.ViewModels.User"
    x:DataType="vm:UserAccountViewModel">
    <ContentPage.BindingContext>
        <vm:UserAccountViewModel />
    </ContentPage.BindingContext>
    <ScrollView>
        <VerticalStackLayout Padding="24" Spacing="18">
            <Label Text="TÃ i khoáº£n" FontSize="24" FontAttributes="Bold" HorizontalOptions="Center"/>

            <Frame HorizontalOptions="Center" BorderColor="#eee" CornerRadius="60" Padding="0">
                <Image Source="{Binding CurrentUser.AvatarUrl}" WidthRequest="120" HeightRequest="120"
                       Aspect="AspectFill" 
                       VerticalOptions="Center" HorizontalOptions="Center"/>
                <Button Text="Äá»•i áº£nh" Command="{Binding ChangeAvatarCommand}" FontSize="12"
                        BackgroundColor="#eee" TextColor="#333" Padding="2" Margin="0,-30,0,0"/>
            </Frame>

            <Label Text="{Binding CurrentUser.FullName}" FontAttributes="Bold" FontSize="20" HorizontalOptions="Center"/>
            <Label Text="{Binding CurrentUser.Email}" FontSize="14" TextColor="#666" HorizontalOptions="Center"/>

            <Label Text="Äiá»ƒm tÃ­ch lÅ©y:" FontAttributes="Bold" FontSize="16"/>
            <Label Text="{Binding CurrentUser.Points}" FontSize="18" TextColor="#0077cc" />

            <Button Text="Äá»•i tÃªn" Command="{Binding EditProfileCommand}"
                    BackgroundColor="#eee" TextColor="#333"/>

            <Button Text="ÄÄƒng xuáº¥t" Command="{Binding LogoutCommand}"
                    BackgroundColor="Red" TextColor="White" Margin="0,24,0,0"/>

            <ActivityIndicator IsRunning="{Binding IsBusy}" IsVisible="{Binding IsBusy}" />
            <Label Text="{Binding ErrorMessage}" TextColor="Red"
                   IsVisible="{Binding ErrorMessage, Converter={StaticResource StringNotEmptyToBoolConverter}}" />

            <Label Text="Badge Ä‘Ã£ Ä‘áº¡t:" FontSize="16" FontAttributes="Bold"/>
            <ScrollView Orientation="Horizontal" HeightRequest="60">
                <HorizontalStackLayout Spacing="8">
                    <!-- Hiá»ƒn thá»‹ badge user Ä‘Ã£ cÃ³ -->
                    <Frame BackgroundColor="#eee" CornerRadius="12"
                           Padding="6" Margin="0,4,0,0"
                           IsVisible="{Binding CurrentUser.BadgeIds.Count, Converter={StaticResource IntGreaterThanZeroConverter}}">
                        <Label Text="ðŸ…" FontSize="32"/>
                        <!-- Náº¿u cÃ³ logic Badge, cÃ³ thá»ƒ load tÃªn badge tÆ°Æ¡ng á»©ng -->
                    </Frame>
                    <!-- Láº·p BadgeIds náº¿u muá»‘n -->
                </HorizontalStackLayout>
            </ScrollView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>

