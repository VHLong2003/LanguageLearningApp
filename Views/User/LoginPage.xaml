<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:LanguageLearningApp.ViewModels.User"
    x:Class="LanguageLearningApp.Views.User.LoginPage">
    <ContentPage.BindingContext>
        <vm:AuthViewModel />
    </ContentPage.BindingContext>
    <ScrollView>
        <VerticalStackLayout Spacing="16" Padding="32">
            <Label Text="Đăng nhập" FontAttributes="Bold" FontSize="28" HorizontalOptions="Center"/>
            <Entry Placeholder="Email" Text="{Binding Email}" Keyboard="Email" />
            <Entry Placeholder="Mật khẩu" Text="{Binding Password}" IsPassword="True" />

            <Label Text="{Binding ErrorMessage}" TextColor="Red"
                   IsVisible="{Binding ErrorMessage, Converter={StaticResource StringNotEmptyToBoolConverter}}" />

            <Button Text="Đăng nhập"
                    Command="{Binding LoginCommand}"
                    IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBoolConverter}}" />

            <ActivityIndicator IsRunning="{Binding IsBusy}" IsVisible="{Binding IsBusy}" />

            <Button Text="Chưa có tài khoản? Đăng ký"
                    Clicked="RegisterButton_Clicked"
                    BackgroundColor="Transparent" TextColor="Blue"/>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
